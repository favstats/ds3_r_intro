<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>A {fun} Intro to R Programming</title>
    <meta charset="utf-8" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <meta name="description" content="Intro to R Programming"/>
    <meta name="generator" content="xaringan and remark.js"/>
    <meta name="github-repo" content="favstats/xxx"/>
    <meta name="twitter:title" content="Intro to R Programming"/>
    <meta name="twitter:description" content="Intro to R Programming"/>
    <meta name="twitter:url" content="https://www.favstats.eu"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:creator" content="@favstats"/>
    <meta name="twitter:site" content="@favstats"/>
    <meta property="og:title" content="Intro to R Programming"/>
    <meta property="og:description" content="Intro to R Programming"/>
    <meta property="og:url" content="https://www.favstats.eu"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="article:author" content="Fabio Votta"/>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="libs/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/lexis.css" type="text/css" />
    <link rel="stylesheet" href="css/lexis-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">



layout: true

&lt;style&gt;
.onehundredtwenty {
  font-size: 120%;
   }

&lt;style&gt;
.ninety {
  font-size: 90%;
   }

.eightyfive {
  font-size: 85%;
   }
   
.eighty {
  font-size: 80%;
   }
   
.seventyfive {
  font-size: 75%;
   }
   
.seventy {
  font-size: 70%;
   }
   
.fifty {
  font-size: 50%;
   }
   
.forty {
  font-size: 40%;
   }
&lt;/style&gt;






---
class: banner


---
name: title-slide
class: primary


#.fancy[A {fun} Intro to R Programming] 

###.fancy[The basics,&lt;br&gt;data wrangling,&lt;br&gt;and more!]


&lt;br&gt;


Fabio Votta

[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:black;overflow:visible;position:relative;"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> @favstats](http://twitter.com/favstats)&lt;br&gt;
[<svg aria-hidden="true" role="img" viewBox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:black;overflow:visible;position:relative;"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> @favstats](http://github.com/favstats)&lt;br&gt;
[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:black;overflow:visible;position:relative;"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg> favstats.eu](https://www.favstats.eu)


July 09 2021

.fifty[Link to slides: [favstats.github.io/ds3_r_intro](https://favstats.github.io/ds3_r_intro)]

---

### Your friendly neighborhood R Instructor

.leftcol40[
&lt;img src="https://scontent-frt3-2.xx.fbcdn.net/v/t1.18169-9/11752441_1214700901878556_7482802106323698580_n.jpg?_nc_cat=101&amp;ccb=1-3&amp;_nc_sid=8bfeb9&amp;_nc_ohc=mdzfuX-QMKoAX-FMHO1&amp;_nc_ht=scontent-frt3-2.xx&amp;oh=edadc28b605f3f2c280f730aff459cbf&amp;oe=60EBCC4E" style="width: 90%" /&gt;



]

.rightcol60[
+ Ph.D. Candidate in Political Communication at University of Amsterdam

+ Passionate about R and Data Science

+ I love to travel (when there is no pandemic)

+ I enjoy and (occasionally) create R memes

]

---

### It's normal to struggle at first but it gets better!

&lt;img src="images/r_first_then_new.png" width="80%" style="display: block; margin: auto;" /&gt;


&lt;!-- ![](images/r_first_then_new.png){width=50%} --&gt;

.fifty[Illustration adapted from [Allison Horst](https://twitter.com/allison_horst)]

--

  + My experience is that this stuff isn't super easy... but it gets better!
  
--
  
+ Awesome inclusive community that is always ready to help
+ Active blogosphere with use cases and examples


---

## Overview

+ R Basics
  + Operators
  + Objects (inc. vectors)
  + Functions
  + Exercises
  + Data frames
  
`\(\text{B R E A K at noon}\)`
  
+ Data Manipulation
  + the tidyverse and friends
  + `janitor`
  + `tidyr`
  + `dplyr`
  + Exercises

---



&lt;!-- #### What is &lt;img src="images/Rlogo.svg" width="30px" inline-block/&gt; ? --&gt;


#### What is &lt;img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/&gt;?

R is a .fancy[statistical] programming language developed for data analysis and visualization.

#### What is &lt;img src="images/rstudio.png" style="display: inline-block; margin: 0"; width="80px"/&gt;?

RStudio is an IDE (Integrated Development Environment).

* Write, save and open R Code (.R/.Rmd files)

* Provides syntax-highlighting and auto-completion &amp; much more

--

# But why learn &lt;img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="60px"/&gt;?

&lt;!-- ![](http://www.favstats.eu/img/headers/season_views.png) --&gt;








---

&lt;!-- #### What is &lt;img src="images/Rlogo.svg" width="30px" inline-block/&gt; ? --&gt;


.leftcol[

#### Why learn &lt;img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/&gt;?

&lt;!-- ![](http://www.favstats.eu/img/headers/season_views.png) --&gt;



+ Amazing Community .forty[(but I already said that)]

&lt;!-- + Outstanding repertoire of statistical &amp; computational methods --&gt;

&lt;!-- -- --&gt;

&lt;!-- + Integrates well with other programming languages (like Python) --&gt;

&lt;!-- -- --&gt;

&lt;!-- + Beautiful Data Visualization with `ggplot2` and more --&gt;

]

.rightcol[


![](https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/welcome_to_rstats_twitter.png)

.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]

]

---

&lt;!-- #### What is &lt;img src="images/Rlogo.svg" width="30px" inline-block/&gt; ? --&gt;


.leftcol60[

#### Why learn &lt;img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/&gt;?

&lt;!-- ![](http://www.favstats.eu/img/headers/season_views.png) --&gt;



+ Amazing Community .forty[(but I already said that)]

+ Data wrangling is accessible &amp; fun

&lt;!-- + Outstanding repertoire of statistical &amp; computational methods --&gt;

&lt;!-- -- --&gt;

&lt;!-- + Integrates well with other programming languages (like Python) --&gt;

&lt;!-- -- --&gt;

&lt;!-- + Beautiful Data Visualization with `ggplot2` and more --&gt;

]

.rightcol40[

&lt;br&gt;

![](https://github.com/allisonhorst/stats-illustrations/blob/master/rstats-artwork/tidyverse_celestial.png?raw=true)

.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]

]

---

.leftcol60[

#### Why learn &lt;img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/&gt;?

&lt;!-- ![](http://www.favstats.eu/img/headers/season_views.png) --&gt;



+ Amazing Community .forty[(but I already said that)]

+ Data wrangling is accessible &amp; fun

+ Outstanding repertoire of statistical &amp; computational methods

&lt;!-- + Integrates well with other programming languages (like Python) --&gt;

&lt;!-- + Beautiful Data Visualization with `ggplot2` and more --&gt;

]

.rightcol40[

&lt;br&gt;

![](https://pbs.twimg.com/media/E4mDfxSXEAA_kvG.jpg)
.fifty[ [easystats](https://github.com/easystats/easystats) packageverse for statistical analysis.]


]

---

.leftcol60[

#### Why learn &lt;img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/&gt;?

&lt;!-- ![](http://www.favstats.eu/img/headers/season_views.png) --&gt;



+ Amazing Community .forty[(but I already said that)]

+ Data wrangling is accessible &amp; fun

+ Outstanding repertoire of statistical &amp; computational methods

+ Integrates well with other programming languages

&lt;!-- + Beautiful Data Visualization with `ggplot2` and more --&gt;

]

.rightcol40[

&lt;br&gt;

![](https://rstudio.github.io/reticulate/images/reticulated_python.png)
.fifty[ [reticulate](https://github.com/easystats/easystats) integrates Python into R]


]

---

.leftcol60[

#### Why learn &lt;img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/&gt;?

&lt;!-- ![](http://www.favstats.eu/img/headers/season_views.png) --&gt;



+ Amazing Community .forty[(but I already said that)]

+ Data wrangling is accessible &amp; fun

+ Outstanding repertoire of statistical &amp; computational methods

+ Integrates well with other programming languages

+ Beautiful data visualization with `ggplot2` 

&lt;br&gt;

&lt;br&gt;


.right[.fifty[Data visualization by [Cédric Scherer](https://www.cedricscherer.com/)]]


]

.rightcol40[


![](https://raw.githubusercontent.com/Z3tt/TidyTuesday/master/plots/2020_31/2020_31_PalmerPenguins.png?raw=true)


]


---


## Google Colab


For the purposes of this workshop we are going to use **Google Colab**.

Google Colab provides an online environment for teaching.

.blue[Upsides] 

+ No need to set up R and RStudio on your own computer

.red[Downsides]

+ You will have to set up R and RStudio on your own computer (when you want to use R on your own)


Link to the first Google Colab  (out of two): [tinyurl.com/ds3rintro1](https://tinyurl.com/ds3rintro1)


---


class: inverse, middle, center

# R Basics

--

### Math Operators


---

### Math Operators

At its core R is just a fancy *calculator*

You can do:

`+` addition

`-` subtraction

`*` multiplication

`/` division

`^` exponentiate

---

### Math Operators

At its core R is just a fancy *calculator*

###  `+` addition


.details[

```r
15 + 5
```

```
#&gt; [1] 20
```
]


--

### Mixing operators


.details[

```r
(15 + 5) / (2 * 5)
```

```
#&gt; [1] 2
```
]

---

## Short excourse: a new data set appears..


But adding up numbers for no reason is no fun.

--

That's why we will use a data set about .fancy[animals] to learn some R Basics.


.leftcol45[
&lt;img src="https://www.pngitem.com/pimgs/m/553-5539545_cartoon-animal-png-humans-and-animals-png-transparent.png" style="width: 100%" /&gt;
]

.rightcol55[

[Animal Ageing and Longevity Database](https://www.johnsnowlabs.com/marketplace/the-animal-aging-and-longevity-database/)

Data on over 4200 animals.

Information on age of maturity, gestation or incubation periods but also **longevity (in years)**.

]


---

## Animal Ageing and Longevity Database


Say we want to know how old an animal is in *human years*.

--

We can use the following simple formula to determine that:

&lt;br&gt;

`$$\frac{\text{Maximum lifespan human}}{\text{Maximum lifespan non-human animal}} = \text{animal to human years ratio}$$`

&lt;br&gt;

*Note: This is just a **very rough** way to determine the conversion ratio. It is **much more** complicated in [reality](https://www.akc.org/expert-advice/health/how-to-calculate-dog-years-to-human-years/).*


---

## Animal Ageing and Longevity Database

.leftcol[

| Animal | Maximum Lifespan |
| --- | --- | 
| Human | 122.5 | 
| Domestic dog | 24.0 | 
| Domestic cat | 30.0 | 
| American alligator | 77.0 | 
| Golden hamster | 3.9 | 
| King penguin | 26.0 | 
| Lion|	27.0 | 
| Greenland shark	 | 392.0 | 
| Galapagos tortoise | 177.0 | 
]


.rightcol[

| Animal | Maximum Lifespan |
| --- | --- | 
| African bush elephant	 | 65.0 | 
| California sea lion	| 35.7	 | 
| Fruit fly		| 0.3	 | 
| House mouse		| 4.0	 |
| Giraffe		| 39.5	 |
| Wild boar		| 27.0	|

Source: [Animal Ageing and Longevity Database](https://www.johnsnowlabs.com/marketplace/the-animal-aging-and-longevity-database/)


]




---

### Math Operators


Say we want to know how old a dog is in *human years*.

--

The observed maximum lifespan of a human is 122.5 years. For dogs it is 24.

--

.details[

```r
122.5/24
```

```
#&gt; [1] 5.104167
```
]

So for every year a human ages, a dog "ages" 5.1 human years. How old is a 15 year old dog in human years?

.details[

```r
5.104167*15
```

```
#&gt; [1] 76.56251
```
]



---

## So many numbers..


Now it can be quite tedious to juggle all those numbers around. 

Especially if we want to keep reusing numbers we calculated before.

--

Here to simplify that process are:

**Objects**


---

class: inverse, middle, center

# R Basics

### R Objects

---

## R Objects

You can think of R objects as *saving information*, for example simple numbers or just plain text. 

Once saved we can recall it whenever we want by just running the name of the object.

--

&gt; Everything that exists in R is *.red[an object]*. .fifty[~John M. Chambers]

--

We create R objects by using the assignment operator: 

&lt;center&gt;
.large[**`&lt;-`**]
&lt;/center&gt;

.right[
.fifty[You can also assign with the **`=`** sign but we will not be using this here.]
]

---

## R Objects

Here is an example:


```r
human_lifespan  &lt;- 122.5
dog_lifespan &lt;- 24
```

If we now run the respective objects we retrieve the saved numbers.

.details[

```r
human_lifespan
```

```
#&gt; [1] 122.5
```
]

.details[

```r
dog_lifespan
```

```
#&gt; [1] 24
```
]


---


## R Objects


Now we can perform the same calculation as before but this time using objects!


```r
dogs_to_human &lt;- human_lifespan / dog_lifespan
```

The object `dogs_to_human` now holds the dog to human years conversion ratio.

--

*Now* we ask again: how old is a 15 year old dog in human years?

.details[

```r
dogs_to_human*15
```

```
#&gt; [1] 76.5625
```
]

---

## A quick note on naming things

.leftcol[
&gt; Note that object names could be *anything* here!  I could have chosen to just name them `x`, `y` and `z`. 



I typically use lower-case snake case in this style: `animal_rights`.
 
Also recommended by the [tidyverse style guide](https://style.tidyverse.org/syntax.html). 
]


.rightcol[
&lt;img src="https://pbs.twimg.com/media/DzH3mPlWwAAYE7q.jpg" style="width: 90%" /&gt;

]



---

## More operators..

But wait there are more operators: .fancy[logical operators]

--

Logical operators are used for logical tests which can result in either: 

`\(\text{TRUE}\)` or `\(\text{FALSE}\)`

*(sometimes this is also called a boolean variable)*



---
class: inverse, middle, center

# R Basics

### Logical Operators

---

## Logical Operators

Let's first create some more objects to try some logical tests!


```r
lion_lifespan &lt;- 27
mouse_lifespan &lt;- 4
fly_lifespan &lt;- 0.3
boar_lifespan &lt;- 27
alligator_lifespan &lt;- 77
greenland_shark_lifespan &lt;- 392
galapagos_tortoise_lifespan &lt;- 177
```


---

## Logical Operators



`==` asks whether two values are the same or **equal**

The code below tests the following statement: 

*The maximum lifespan of a lion equals that of a boar.*

.details[

```r
lion_lifespan == boar_lifespan
```

```
#&gt; [1] TRUE
```
]

--

Since both maximum lifespans are `27` this is of course a **`TRUE`** statement.

---

## Logical Operators

`!=`  asks whether two values are the *not* the same or **unequal**

The code below tests the following statement: 

*The maximum lifespan of a lion **does not equal** that of a boar.*

.details[

```r
lion_lifespan != boar_lifespan
```

```
#&gt; [1] FALSE
```
]

--

Since both maximum lifespans are `27` (as we saw before) this is of course a **`FALSE`** statement.


---


## Logical Operators

We can also test whether certain values are greater or smaller than others:

`&gt;` greater than

The code below tests the statement: 

*The lifespan of a human is greater than the lifespan of a fly.*

.details[

```r
human_lifespan &gt; fly_lifespan
```

```
#&gt; [1] TRUE
```
]

--

Since the maximum human lifespan is `122.5` and a fly does not live longer than `0.3` years this is of course a **`TRUE`** statement.

---

## Logical Operators


`&lt;` smaller than

The code below tests the statement: 

*The lifespan of an alligator is smaller than the lifespan of a mouse.*

.details[

```r
alligator_lifespan &lt; mouse_lifespan
```

```
#&gt; [1] FALSE
```
]

--

Since the maximum alligator lifespan is `77` and a mouse lives for `4` years maximum, this is of course a **`FALSE`** statement.

--

Also note the following options:

`&gt;=` greater or equals and `&lt;=` smaller or equals

---


## Combine Logical Operators

We can also combine logical tests by testing multiple statements at the same time:

* `&amp;` stands for "and" (unsurprisingly)
* `|` stands for "or"

For example both `alligator_lifespan` and `fly_lifespan` have to be greater than `mouse_lifespan` for the code below to evaluate as `TRUE`.

.details[

```r
alligator_lifespan &gt; mouse_lifespan &amp; 
fly_lifespan &gt; mouse_lifespan
```

```
#&gt; [1] FALSE
```
]



---



## Combine Logical Operators

We can also combine logical tests by testing multiple statements at the same time:

* `&amp;` stands for "and" (unsurprisingly)
* `|` stands for "or"

If we say `|` (= or) instead, it means either statement evaluation to `TRUE` is enough!

.details[

```r
alligator_lifespan &gt; mouse_lifespan | 
fly_lifespan &gt; mouse_lifespan
```

```
#&gt; [1] TRUE
```
]

---


## Even more objects..?

Now we learned about operators and some basic objects. 

But so far objects have only ever held a *single numeric value*. 

R is of course much more powerful than that and objects can hold any number and types of data.

--

Now we will take a look at **vectors**, or objects that include more than one value.

---
class: inverse, middle, center

# R Basics

### Vectors

---

## Vectors

You can simply imagine vectors as a list of values. They can consist of numbers but also *strings* (or: text).

In order to create a vector in R we make use of `c()` (stands for *concatenate*)


.details[

```r
c(1, 100, 1000, 2000, 5000)
```

```
#&gt; [1]    1  100 1000 2000 5000
```
]

We can also create a vector of strings by using quotes:


.details[

```r
c("I", "am", "a", "vector", "of", "strings")
```

```
#&gt; [1] "I"       "am"      "a"       "vector"  "of"      "strings"
```
]

---


## Vectors

We can combine the lifespans we assigned into objects earlier:



```r
animal_lifespans &lt;-  c(greenland_shark_lifespan, dog_lifespan, 
  galapagos_tortoise_lifespan,
  mouse_lifespan, fly_lifespan,
  lion_lifespan, boar_lifespan,
  alligator_lifespan, human_lifespan)
```

.details[

```r
animal_lifespans
```

```
#&gt; [1] 392.0  24.0 177.0   4.0   0.3  27.0  27.0  77.0 122.5
```
]


---


## Vectors

We can also create a vector of strings by using quotes:

.details[

```r
animals &lt;- c("greenland_shark", "dog", 
  "galapagos_tortoise", "mouse", 
  "fly", "lion", "boar",
  "alligator", "human")
```
]



.details[

```r
animals
```

```
#&gt; [1] "greenland_shark"    "dog"                "galapagos_tortoise"
#&gt; [4] "mouse"              "fly"                "lion"              
#&gt; [7] "boar"               "alligator"          "human"
```
]


---


## Vectors

Now if we wanted to get the different year conversation ratios we can simply divide the maximum human age number by the vector.

.details[

```r
human_lifespan / animal_lifespans
```

```
#&gt; [1]   0.3125000   5.1041667   0.6920904  30.6250000 408.3333333   4.5370370
#&gt; [7]   4.5370370   1.5909091   1.0000000
```
]

Notice how the operation is performed for each item separately and the result is yet another vector.


---

## Vectors

We can also use *logical* operators with vectors:

.details[

```r
animal_lifespans &gt; human_lifespan
```

```
#&gt; [1]  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
```
]

Again, notice how the operation is performed for each item separately and the result is yet another vector, this time consisting of `TRUE`s and `FALSE`s.

---


## A logical operator for vectors: `%in%`

An incredibly useful operator for vectors is **`%in%`**. 

The operator checks whether multiple elements occur somewhere in your vectors.

This basic usage looks like this:

`\(\color{red}{\text{vector1}}\)` %in% `\(\color{orange}{\text{vector2}}\)`


---


## A logical operator for vectors: `%in%`


Let's say we want to check whether `giraffe`, `greenland_shark` or `lion` occur in `animals`. 

If we use `|` we would have to write something like this:


```r
animals == "giraffe" | animals == "greenland_shark"  | animals == "lion"
```

--

With `%in%` we can simply pass a vector like this:


```r
animals_to_check &lt;-  c("giraffe", "greenland_shark", "lion")
animals %in% animals_to_check
```

---

## A logical operator for vectors: `%in%`

Doesn't look that much better? 

Now imagine you have dozens or hundreds of animals to check!

---

## A logical operator for vectors: `%in%`

With **`|`** it's utter chaos.

.fifty[

```r
animals == "honey_bee" | animals == "cardiocondyla_obscurior" | animals == "black_garden_ant" | animals == "pheidole_dentata" | animals == "squinting_bush_brown" | animals == "american_lobster" | animals == "firebelly_toad" | animals == "oriental_firebelly_toad" | animals == "yellow_bellied_toad" | animals == "american_toad" | animals == "western_toad" | animals == "yosemite_toad" | animals == "great_plains_toad" | animals == "green_toad" | animals == "canadian_toad" | animals == "red_spotted_toad" | animals == "sonoran_green_toad" | animals == "southern_toad" | animals == "veragoa_stubfoot_toad" | animals == "common_european_toad" | animals == "colorado_river_toad" | animals == "kihansi_spray_toad" | animals == "ridge_headed_toad" | animals == "cuban_toad" | animals == "european_green_toad" | animals == "colombian_giant_toad" | animals == "argentine_toad" | animals == "cane_toad" | animals == "eurura_toad" | animals == "common_horned_frog" | animals == "colombian_horned_frog" | animals == "amazonian_horned_frog" | animals == "ornate_horned_frog" | animals == "green_and_black_dart_poison_frog" 
```

```
#&gt; [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
```
]

---

## A logical operator for vectors: `%in%`


With **`%in%`** it's much more sensible.


.fifty[

```r
animals_to_check &lt;-  c("honey_bee", "cardiocondyla_obscurior", "black_garden_ant", "pheidole_dentata", "squinting_bush_brown", "american_lobster", "firebelly_toad", "oriental_firebelly_toad", "yellow_bellied_toad",  "american_toad", "western_toad", "yosemite_toad", "great_plains_toad", "green_toad", "canadian_toad", "red_spotted_toad", "sonoran_green_toad", "southern_toad", "veragoa_stubfoot_toad", "common_european_toad",  "colorado_river_toad", "kihansi_spray_toad", "ridge_headed_toad", "cuban_toad", "european_green_toad","colombian_giant_toad", "argentine_toad", "cane_toad", "eurura_toad", "common_horned_frog", "colombian_horned_frog", "amazonian_horned_frog", "ornate_horned_frog")
```
]



```r
animals %in% animals_to_check
```

```
#&gt; [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
```

---

class: inverse, middle, center

# R Basics

### Indexing (with vectors)

---


## Indexing

When you want to know a specific value within your object you can use indexing.

Indexing is done via square brackets `[]`.

The basic setup looks like this:

`$$\color{red}{\text{vector}}[\color{orange}{\text{elements}}]$$`
---


## Indexing

Exracting the first element of a vector:


```r
animal_lifespans[1]
```

```
#&gt; [1] 392
```


```r
animals[1]
```

```
#&gt; [1] "greenland_shark"
```

---

## Indexing

Exracting the fifth element of a vector:


```r
animal_lifespans[5]
```

```
#&gt; [1] 0.3
```


```r
animals[5]
```

```
#&gt; [1] "fly"
```


---

## Indexing with logical tests

You can also index using logical tests. 

So if an expression evaluates to `TRUE` it will **keep** that element and when it evaluates to `FALSE` it will remove the **element**.

`$$\color{red}{\text{vector}}[\color{orange}{\text{vector of TRUE/FALSE of same length}}]$$`
---


## Indexing with logical tests

Let's first take a look at a logical test that extracts all animals that have greater lifespans than humans:



```r
longer_living &lt;- animal_lifespans &gt; human_lifespan

longer_living
```

```
#&gt; [1]  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
```

Now we can use square brackets to only keep those animals that have greater lifespans than humans.


```r
animals[longer_living]
```

```
#&gt; [1] "greenland_shark"    "galapagos_tortoise"
```


---

## Short excourse: variable types

There are three-ish main types of variables:

--

.seventy[
* **logical**: Boolean/binary, is either `TRUE` or `FALSE`
]


```r
class(TRUE)
```

```
#&gt; [1] "logical"
```

.seventy[
* **character (or string)**: simple text, including symbols and numbers `"text"`
]


```r
class("I am a character")
```

```
#&gt; [1] "character"
```

.seventy[
* **numeric**: Numbers. Mathmatical operators can be used here.
]


```r
class(2020)
```

```
#&gt; [1] "numeric"
```

---

## Short excourse: variable types

Another important value to consider is `NA` (*Not Available*).

`NA` is a special value that simply means *missing value*.


```r
c(12, NA, 23, 22, NA)
```

```
#&gt; [1] 12 NA 23 22 NA
```

---
class: inverse, middle, center

# R Basics

### Functions

---

## Functions

&gt; Everything that happens in R is *.red[a function]*. .fifty[~John M. Chambers]

You can think of functions as little machines that (in most cases) process some kind of **input** and create an **output**. 

Input is everything that goes *into* a function:

*   **arguments** you can think of as (pre-determined) input types like a lever or numpad.

*   **values** you can think of as the various settings that the levers or numpads can have.

`$$\text{function_name}(\color{orange}{\text{argument}}=\color{lightblue}{\text{value}})$$`
---

## Functions

&gt; Everything that happens in R is *.red[a function]*. .fifty[~John M. Chambers]


You can think of functions as little machines that (in most cases) process some kind of **input** and create an **output**. 

Input is everything that goes *into* a function:

*   **arguments** you can think of as (pre-determined) input types like a lever or numpad.

*   **values** you can think of as the various settings that the levers or numpads can have.

*Let's take a look at an example:  the star producer!*

---

&lt;img src="https://raw.githubusercontent.com/favstats/hertieschool_datasciencesummerschool/master/img/starproducer2.png" width="90%" /&gt;


---


## The Star Producer

Let's consider the following function (that does not exist unfortunately):
A `star_producer`!

This little machine creates tiny hand-drawn stars depending on some input. It takes two arguments:

* `how_many` tells the machine how many stars to produce
* `type` tells the machine how the stars should look like (in this case the machine only supports `"squiggly"` stars but it could be upgraded in the future when we learn how to create our own functions later on)

---

## Getting `?help`

How do we know what function takes what kind of arguments?

Within R you can always run the code:


```r
?function_name
```

And it will open up the *documentation* for the function that will tell you how to use it.

Googling the function (adding R or rstats) will also often bring you to some documentation in most cases!

---

## An example function: `seq`

--

From the help file we can learn that this function is used to 

&gt; "[g]enerate regular sequences".

Its first three arguments are this:

* `from`, `to`: the starting and (maximal) end values of the sequence. 

* `by`: number: increment of the sequence.



Let's first take a look at this within our machine allegory.

---

&lt;img src="https://raw.githubusercontent.com/favstats/hertieschool_datasciencesummerschool/master/img/seq2.png" width="90%" /&gt;

---

## An example function: `seq`
If we would want to create a vector from 1 to 10 that increments by 1 we can simple specify the following input values for the arguments:

* `from`: 1
* `to`: 10
* `by`: 1


This is how that looks like in code:


```r
seq(from = 1, to = 10, by = 1)
```

```
#&gt;  [1]  1  2  3  4  5  6  7  8  9 10
```


---

### A tip

There is however a much simpler way to create sequences that increment by one.

Simply use a *`:`* between two number and it generates a sequence:


```r
1:10
```

```
#&gt;  [1]  1  2  3  4  5  6  7  8  9 10
```



```r
1000:1010
```

```
#&gt;  [1] 1000 1001 1002 1003 1004 1005 1006 1007 1008 1009 1010
```

---

### Passing Values

Now there are two ways to pass values to functions in R:

1.   Pass by argument *names* (we already did this above!)
2.   Pass by argument *position*

In the former case, we specifically mention which arguments we want to pass our values to. 

For that, it doesn't matter in which **order** we pass our arguments.


```r
seq(to = 10, by = 1, from = 1)
```

```
#&gt;  [1]  1  2  3  4  5  6  7  8  9 10
```



---


### Passing Values by position

But: **coders are lazy**.

There is no need to always specify which argument you mean exactly when you can just match *by position*.

So our sequence example could just as well look like this:


```r
seq(1, 10, 1)
```

```
#&gt;  [1]  1  2  3  4  5  6  7  8  9 10
```

And it works because the documentation tells us that the first three arguments are `from`, `to`, and `by`.

In the future you will see it often that people just leave out the arguments completely so it's good to get used to it. 

---

## More examples: Mean and Median

Many functions have so intuitive arguments that we often don't need to even look up the documentation.

An easy function to use is `mean` which simply calculates the average of a numeric vectors. 

Let's try this with the `animal_lifespans` we created earlier.


```r
mean(animal_lifespans)
```

```
#&gt; [1] 94.53333
```

The mean value is quite high!

---

## More examples: Mean and Median

We can also try and take the median value:


```r
median(animal_lifespans)
```

```
#&gt; [1] 27
```

When we take the median instead of the mean we can see that this is due to high outliers (the median is of course more robust to extreme values).

There are many more functions in R and we will get to learn some of them during this workshop.


---
class: inverse, middle, center

# R Basics

### Creating our own Functions

--

&lt;center&gt;
&lt;img src="https://media.giphy.com/media/f74WDV59cP0NArh8gu/giphy.gif" style="width: 50%" /&gt;


&lt;/center&gt;


---

## Creating our own functions

We can create our own function using the call: `function()`.

We encode what is supposed to happen within curly brackets `{}`.

Here is the anatomy of a function:


`\(\color{purple}{\text{my_function_name}}\)` &lt;- `\(\text{function}(\color{orange}{\text{argument}})\)`{


&amp;nbsp;&amp;nbsp;&amp;nbsp; `\(\color{green}{\text{# function body}}\)`

&amp;nbsp;&amp;nbsp;&amp;nbsp; `\(\color{lightblue}{\text{output}}\)` &lt;- `\(\color{orange}{\text{argument}}\)`

&amp;nbsp;&amp;nbsp;&amp;nbsp; `\(\text{return(}\color{lightblue}{\text{output}}\text{)}\)`

}

---

## Creating our own functions

* `\(\color{purple}{\text{Function name}}\)`:
  * An identifier by which the function is called 

* `\(\color{orange}{\text{Argument(s)}}\)`:
  * Contains a list of values passed to the function
  * Can also contain a default value like this: `argument = 1`

* `\(\color{green}{\text{Function body}}\)`:
  * This is executed each time the function is called

* `\(\color{lightblue}{\text{Return value}}\)`:
  * Ends function call &amp; sends the value back to the global environment





---


## Creating our own functions

Let's try this basic example:


```r
my_function_name &lt;- function(argument){
  # function body
  output &lt;- argument
  return(output)
}
```


```r
my_function_name("I am output!")
```

```
#&gt; [1] "I am output!"
```

&gt; Tip: In RStudio we can just type `fun` and enter after the popup and RStudio will just automatically generate a template for a function.


---

## Creating our own functions

We can also specify *default values* for our arguments:


```r
my_function_name &lt;- function(argument = "I am a default value"){
  # function body
  output &lt;- argument
  return(output)
}
```


```r
my_function_name()
```

```
#&gt; [1] "I am a default value"
```

---

## Creating our own functions

Let's create a slightly more useful function: a function which squares numeric values.


```r
square &lt;- function(here_goes_my_number) { 
  output &lt;- here_goes_my_number^2        
  
  return(output)                  
}
```


```r
square(2)   
```

```
#&gt; [1] 4
```




---


## Creating our own functions

Let's create a function that is able to calculate dog years into human years. We call the function `dog_to_human_years`.


```r
dog_to_human_years &lt;- function(animal_years){

  human_lifespan &lt;- 122.5
  dog_lifespan &lt;- 24

  ratio &lt;- human_lifespan/dog_lifespan

  human_years &lt;- animal_years*ratio

  return(human_years)
}
```


```r
dog_to_human_years(15)
```

```
#&gt; [1] 76.5625
```

---

## A quick note on errors and debugging

Soon we will go into exercise mode!

Before that, however, it's important to understand:

&gt; Seasoned R user or complete beginner, **everyone makes mistakes.**
&gt; Encountering errors sometimes is normal.

No R programmer ever just fell from the sky. 

*Debugging* is the process of finding and resolving bugs/problems in code and it **happens all the time**.

---

## A quick note on errors and debugging

So you encountered an error:


```
#&gt; Error: subset of type closure is not subsettable
```

Steps to take:

* Try to understand what it says.

  * Easier said than done, because many R errors are actually quite cryptic unfortunately.



---

## A quick note on errors and debugging

So you encountered an error:


```
#&gt; Error: subset of type closure is not subsettable
```

Steps to take:

* Try to understand what it says.

* Google (or other search engines)

  * Search for the error
  * Search for what you were trying to do (add R or rstats)


---

## A quick note on errors and debugging

So you encountered an error:


```
#&gt; Error: subset of type closure is not subsettable
```

Steps to take:

* Try to understand what it says.

* Google (or other search engines)

* If the error occurs in a function check whether you passed an object type that isn't expected by it.

  * Checking the documentation can help here! Type: `?function`

---

## A quick note on errors and debugging

So you encountered an error:


```
#&gt; Error: subset of type closure is not subsettable
```

Steps to take:

* Try to understand what it says.

* Google (or other search engines)

* If the error occurs in a function check whether you passed an object type that isn't expected by it.

* Ask for help! Create a *reproducible example* (reprex) and post to online communities

---
class: center, middle, inverse

# Exercises

### It's time to type some R code




&lt;center&gt;
&lt;img src="https://media1.tenor.com/images/72bf7922ac0b07b2f7f8f630e4ae01d2/tenor.gif?itemid=11364811" style="width: 50%" /&gt;
&lt;/center&gt;

Google Colab: [tinyurl.com/ds3rintro1](https://tinyurl.com/ds3rintro1)

---
class: center, middle, inverse

# Data frames

---

## Data frames

Data frames are the main R object that we will be interacting with. In many ways you already know about them too. 

An example for a dataframe would be the table from the [Animal Ageing and Longevity Database](https://www.johnsnowlabs.com/marketplace/the-animal-aging-and-longevity-database/) we already saw earlier.


| Animal | Maximum Longevity (in years)|
| --- | --- | 
| Human | 122.5.5 | 
| Domestic dog | 24.0 | 
| Domestic cat | 30.0 | 
| American alligator | 77.0 | 






---

## Data frames

To create a data frame from scratch we can simply pass two (same-sized) vectors to the function `data.frame`. 


```r
animals_data &lt;- data.frame(animals, animal_lifespans)

animals_data
```

```
#&gt;              animals animal_lifespans
#&gt; 1    greenland_shark            392.0
#&gt; 2                dog             24.0
#&gt; 3 galapagos_tortoise            177.0
#&gt; 4              mouse              4.0
#&gt; 5                fly              0.3
#&gt; 6               lion             27.0
#&gt; 7               boar             27.0
#&gt; 8          alligator             77.0
#&gt; 9              human            122.5
```



---

## Variable Names

We can also retrieve the variable names of any data frame by passing it to `names()`.


```r
names(animals_data)
```

```
#&gt; [1] "animals"          "animal_lifespans"
```



---

## Retrieve variables

If we want to retrieve specific variables from a data frame we can do that via the `$` operator. 

$$\color{red}{\text{dataset}}$\color{orange}{\text{variable_name}}$$


Think of the `$` symbol as a door opener that helps you check what is inside an object.


```r
animals_data$animal_lifespans
```

```
#&gt; [1] 392.0  24.0 177.0   4.0   0.3  27.0  27.0  77.0 122.5
```



```r
animals_data$animals
```

```
#&gt; [1] "greenland_shark"    "dog"                "galapagos_tortoise"
#&gt; [4] "mouse"              "fly"                "lion"              
#&gt; [7] "boar"               "alligator"          "human"
```

---

## (Re-)Code variables

We can also use the `$` data access to add **new variables**.

In the below case we create a variable called `animal_to_human` which holds all the human to animal years conversions. 

We do that by simply assigning a vector containing that information to `animals_data$animal_to_human` even if that variable doesn't exist yet.


```r
animals_data$animal_to_human &lt;- animals_data$animal_lifespans / human_lifespan
```


```r
animals_data
```

```
#&gt;              animals animal_lifespans animal_to_human
#&gt; 1    greenland_shark            392.0      3.20000000
#&gt; 2                dog             24.0      0.19591837
#&gt; 3 galapagos_tortoise            177.0      1.44489796
#&gt; 4              mouse              4.0      0.03265306
#&gt; 5                fly              0.3      0.00244898
#&gt; 6               lion             27.0      0.22040816
#&gt; 7               boar             27.0      0.22040816
#&gt; 8          alligator             77.0      0.62857143
#&gt; 9              human            122.5      1.00000000
```



---


## Indexing

Just as we did before with vectors we can also index data frames with square brackets: `[]`. However, unlike vectors, data frames have **two dimensions**.

So that is why the square brackets in this case take two inputs, separated by a comma:

`$$\color{red}{\text{dataset}}[\color{orange}{\text{rows}},\color{lightblue}{\text{columns}}]$$`

* The first value after the opening square bracket refers to `\(\color{orange}{\text{which rows}}\)` you want to keep.

* The second value refers to `\(\color{lightblue}{\text{which columns}}\)` you want to keep.

---


## Indexing


So if we only want to keep the first row of the first column of our `animals_data` that is how we would do that:



```r
animals_data[1, 1]
```

```
#&gt; [1] "greenland_shark"
```

*If* we want to keep a certain row but all columns we can do this by leaving the *second* value within the square brackets empty.


```r
animals_data[1, ]
```

```
#&gt;           animals animal_lifespans animal_to_human
#&gt; 1 greenland_shark              392             3.2
```

---

## Indexing

The same works for columns but all rows:


```r
animals_data[, 1]
```

```
#&gt; [1] "greenland_shark"    "dog"                "galapagos_tortoise"
#&gt; [4] "mouse"              "fly"                "lion"              
#&gt; [7] "boar"               "alligator"          "human"
```

---

## Indexing with logical tests


We can also do more complex indexing by keeping only the rows that fulfill a certain condition. Let's say we only want to keep the rows that contain animals that have longer lifespans than humans.


```r
animals_to_check &lt;- animals_data$animal_lifespans &gt; human_lifespan
```


```r
animals_data[animals_to_check, ]
```

```
#&gt;              animals animal_lifespans animal_to_human
#&gt; 1    greenland_shark              392        3.200000
#&gt; 3 galapagos_tortoise              177        1.444898
```

---
class: center, middle, inverse

## Break?

---
class: center, middle, inverse

# R Packages

&lt;center&gt;
&lt;img src="https://media.tenor.com/images/0a9c3d898ea6fb84d7f190b67db91a0e/tenor.gif" style="width: 30%" /&gt;
&lt;/center&gt;

---

## R Packages

Packages are at the heart of R: 

* R packages are basically a collection of functions that you load into your working environment.

* They contain code that other R users have prepared for the community.

--

* It's good to know your packages, they can really make your life easier.

* I suggest keeping track of package developments either on Twitter via #rstats

* Or [postsyoumighthavemissed.com](https://postsyoumighthavemissed.com/posts/)

---

## R Packages

You can install packages in R like this using the `install.packages` function:


```r
install.packages("janitor")
```

However, installing is not enough. You also need to load the package via `library`.


```r
library(janitor)
```

Think of `install.packages` as buying a set of tools (for free!) and `library` as pulling out the tools each time you want to work with them.



---
class: center, middle, inverse

![](https://predictivehacks.com/wp-content/uploads/2020/11/tidyverse-default.png)

---

## What is the `tidyverse`?

The tidyverse describes itself:

&gt; The tidyverse is an opinionated **collection of R packages** designed for data science. All packages share an underlying design philosophy, grammar, and data structures.


&lt;center&gt;
&lt;img src="https://rstudio-education.github.io/tidyverse-cookbook/images/data-science-workflow.png" style="width: 60%" /&gt;
&lt;/center&gt;

---

## Core principle: tidy data

* Every column is a variable.
* Every row is an observation.
* Every cell is a single value.

We have already seen tidy data:

| Animal | Maximum Lifespan | Animal/Human Years Ratio  |
| --- | --- | --- | 
| Domestic dog | 24.0 | 5.10 |
| Domestic cat | 30.0 | 4.08 |
| American alligator | 77.0 | 1.59 | 
| Golden hamster | 3.9 | 31.41 |
| King penguin | 26.0 |  4.71 |

---

## Untidy data I

.leftcol[
| Animal | Type | Value  |
| --- | --- | --- | 
| Domestic dog | lifespan | 24.0 |
| Domestic dog | ratio | 5.10 |
| Domestic cat | lifespan | 30.0 |
| Domestic cat | ratio | 4.08 |
| American alligator | lifespan | 77.0 | 
| American alligator | ratio | 1.59 |
| Golden hamster | lifespan | 3.9 |
| Golden hamster | ratio | 31.41 |
| King penguin | lifespan |  26.0 |
| King penguin | ratio |  4.71 |
]

.rightcol[

&lt;br&gt;

&lt;br&gt;

The data on the right has multiple rows with the same observation (animal).

= not tidy

]

---

## Untidy data II

| Animal | Lifespan/Ratio  |
| --- | --- | 
| Domestic dog | 24.0 / 5.10 |
| Domestic cat | 30.0 / 4.08 |
| American alligator | 77.0 / 1.59 | 
| Golden hamster | 3.9 / 31.41 |
| King penguin | 26.0 /  4.71 |

The data above has multiple variables per column.

= not tidy

---

## Core principle: tidy data

&lt;center&gt;
&lt;img src="https://www.openscapes.org/img/blog/tidydata/tidydata_2.jpg" style="width: 80%" /&gt;
&lt;/center&gt;

.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]
---

## Core principle: tidy data

Tidy data has two decisive advantages:

* Consistently prepared data is easier to read, process, load and save.

* Many procedures (or the associated functions) in R require this type of data.

&lt;center&gt;
&lt;img src="https://www.openscapes.org/img/blog/tidydata/tidydata_4.jpg" style="width: 40%" /&gt;
&lt;/center&gt;

.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]
---


## Installing and loading the tidyverse

First we install the packages of the tidyverse like this:


```r
install.packages("tidyverse")
```

Then we load them:


```r
library(tidyverse)
```

---



## A new dataset appears..

We are going to work with a new data from here on out.

No worries, we will stay within the animal kingdom but we need a dataset that is a little more complex than what we have seen already.


---

## A new dataset appears..

We are going to work with a new data from here on out.

Meet the Palmer penguins! Data were collected and made available by [Dr. Kristen Gorman](https://www.uaf.edu/cfos/people/faculty/detail/kristen-gorman.php) and the [Palmer Station, Antarctica LTER](https://pal.lternet.edu/).



.leftcol[
&lt;center&gt;
&lt;img src="https://github.com/allisonhorst/palmerpenguins/raw/master/man/figures/lter_penguins.png" style="width: 80%" /&gt;
&lt;/center&gt;
]

.rightcol[
&lt;center&gt;
&lt;img src="https://github.com/allisonhorst/palmerpenguins/raw/master/man/figures/culmen_depth.png" style="width: 80%" /&gt;
&lt;/center&gt;
.right[
.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]]
]



---

## Palmer Penguins

We could install the R package `palmerpenguins` and then access the data. 

However, we are going to use a different method: directly load a .csv file (comma-separated values) into R from the internet.

We can use the `readr` package which provides many convenient functions to load data into R. Here we need `read_csv`:


```r
penguins_raw &lt;- read_csv("https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/inst/extdata/penguins_raw.csv")
```

---


## Palmer Penguins


```r
penguins_raw
```

```
#&gt; # A tibble: 344 x 17
#&gt;    studyName `Sample Number` Species Region Island Stage `Individual ID`
#&gt;    &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
#&gt;  1 PAL0708                 1 Adelie… Anvers Torge… Adul… N1A1           
#&gt;  2 PAL0708                 2 Adelie… Anvers Torge… Adul… N1A2           
#&gt;  3 PAL0708                 3 Adelie… Anvers Torge… Adul… N2A1           
#&gt;  4 PAL0708                 4 Adelie… Anvers Torge… Adul… N2A2           
#&gt;  5 PAL0708                 5 Adelie… Anvers Torge… Adul… N3A1           
#&gt;  6 PAL0708                 6 Adelie… Anvers Torge… Adul… N3A2           
#&gt;  7 PAL0708                 7 Adelie… Anvers Torge… Adul… N4A1           
#&gt;  8 PAL0708                 8 Adelie… Anvers Torge… Adul… N4A2           
#&gt;  9 PAL0708                 9 Adelie… Anvers Torge… Adul… N5A1           
#&gt; 10 PAL0708                10 Adelie… Anvers Torge… Adul… N5A2           
#&gt; # … with 334 more rows, and 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date
#&gt; #   Egg` &lt;date&gt;, `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#&gt; #   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;, `Delta 15 N
#&gt; #   (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;
```

---


## Palmer Penguins

We can also take a look at data set using the `glimpse` function from `dplyr`.


```r
glimpse(penguins_raw)
```

```
#&gt; Rows: 344
#&gt; Columns: 17
#&gt; $ studyName             &lt;chr&gt; "PAL0708", "PAL0708", "PAL0708", "PAL0708", "PA…
#&gt; $ `Sample Number`       &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, …
#&gt; $ Species               &lt;chr&gt; "Adelie Penguin (Pygoscelis adeliae)", "Adelie …
#&gt; $ Region                &lt;chr&gt; "Anvers", "Anvers", "Anvers", "Anvers", "Anvers…
#&gt; $ Island                &lt;chr&gt; "Torgersen", "Torgersen", "Torgersen", "Torgers…
#&gt; $ Stage                 &lt;chr&gt; "Adult, 1 Egg Stage", "Adult, 1 Egg Stage", "Ad…
#&gt; $ `Individual ID`       &lt;chr&gt; "N1A1", "N1A2", "N2A1", "N2A2", "N3A1", "N3A2",…
#&gt; $ `Clutch Completion`   &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "No",…
#&gt; $ `Date Egg`            &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16…
#&gt; $ `Culmen Length (mm)`  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 3…
#&gt; $ `Culmen Depth (mm)`   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 1…
#&gt; $ `Flipper Length (mm)` &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190…
#&gt; $ `Body Mass (g)`       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3…
#&gt; $ Sex                   &lt;chr&gt; "MALE", "FEMALE", "FEMALE", NA, "FEMALE", "MALE…
#&gt; $ `Delta 15 N (o/oo)`   &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.1…
#&gt; $ `Delta 13 C (o/oo)`   &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.29…
#&gt; $ Comments              &lt;chr&gt; "Not enough blood for isotopes.", NA, NA, "Adul…
```

---

class: center, middle, inverse

## initial data cleaning

### using `janitor`


&lt;center&gt;
&lt;img src="https://github.com/sfirke/janitor/raw/main/man/figures/logo_small.png" style="width: 20%" /&gt;
&lt;/center&gt;


---

## cleaning with `janitor`

`janitor` is not offically part of the tidyverse package compilation but in my view it is incredibly important to know.

Provides some convenient functions for basic cleaning of the data.

Just like any tidverse-style package it fullfills the following criteria for its functions:

&gt; The data is always the first argument.

This helps us to match by position.

---

## cleaning with `janitor`

One annoyance with the `penguins_raw` data is that it has spaces in the variable names. Urgh! 

R has to put quotes around the variable names that have spaces:


```r
penguins_raw$`Delta 15 N (o/oo)`
penguins_raw$`Flipper Length (mm)`
```

`janitor` can help with that: 

using a function called `clean_names()`

---


## cleaning with `janitor`

`clean_names()` just magically turns all our messy column names into readable lower-case snake case:


```r
library(janitor)

penguins_clean &lt;- clean_names(penguins_raw) 
```

That is how the variables look like now:


```r
penguins_clean$delta_15_n_o_oo
penguins_clean$flipper_length_mm
```


---

## cleaning with `janitor`



```r
glimpse(penguins_clean)
```

```
#&gt; Rows: 344
#&gt; Columns: 17
#&gt; $ study_name        &lt;chr&gt; "PAL0708", "PAL0708", "PAL0708", "PAL0708", "PAL070…
#&gt; $ sample_number     &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, …
#&gt; $ species           &lt;chr&gt; "Adelie Penguin (Pygoscelis adeliae)", "Adelie Peng…
#&gt; $ region            &lt;chr&gt; "Anvers", "Anvers", "Anvers", "Anvers", "Anvers", "…
#&gt; $ island            &lt;chr&gt; "Torgersen", "Torgersen", "Torgersen", "Torgersen",…
#&gt; $ stage             &lt;chr&gt; "Adult, 1 Egg Stage", "Adult, 1 Egg Stage", "Adult,…
#&gt; $ individual_id     &lt;chr&gt; "N1A1", "N1A2", "N2A1", "N2A2", "N3A1", "N3A2", "N4…
#&gt; $ clutch_completion &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "No", "No…
#&gt; $ date_egg          &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16, 20…
#&gt; $ culmen_length_mm  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1,…
#&gt; $ culmen_depth_mm   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1,…
#&gt; $ flipper_length_mm &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 18…
#&gt; $ body_mass_g       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475,…
#&gt; $ sex               &lt;chr&gt; "MALE", "FEMALE", "FEMALE", NA, "FEMALE", "MALE", "…
#&gt; $ delta_15_n_o_oo   &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18718…
#&gt; $ delta_13_c_o_oo   &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.29805,…
#&gt; $ comments          &lt;chr&gt; "Not enough blood for isotopes.", NA, NA, "Adult no…
```


---

## cleaning with `janitor`

Now we have another problem. Not all variables in the `penguins_clean` data set are that useful. 

Some of them are the same across all observations. We don't need those variables, like `region`.


```r
table(penguins_clean$region)
```

```
#&gt; 
#&gt; Anvers 
#&gt;    344
```

We can use the base R function `table` to quickly get some tabulations of our variable.

---

## cleaning with `janitor`

Here to help get rid of these *constant* columns is the function `remove_constant()`.


```r
penguins_clean &lt;- remove_constant(penguins_clean, quiet = F)
```

```
#&gt; Removing 2 constant columns of 17 columns total (Removed: region, stage).
```




When we set `quiet = F` we even get some input as to what exactly was removed. Neat!


Another useful function in `janitor` is `remove_empty()` which removes all rows or columns that just consist of missing values (i.e. `NA`)




---
class: center, middle, inverse

## Data cleaning using `tidyr`

&lt;center&gt;
&lt;img src="https://tidyr.tidyverse.org/logo.png" style="width: 32%" /&gt;
&lt;/center&gt;


---

## Data cleaning using `tidyr`

Now we are already fairly advanced in our tidying.

But our dataset is still not entirely tidy yet.

Consider the `species` variable:


```r
table(penguins_clean$species)
```

```
#&gt; 
#&gt;       Adelie Penguin (Pygoscelis adeliae) 
#&gt;                                       152 
#&gt; Chinstrap penguin (Pygoscelis antarctica) 
#&gt;                                        68 
#&gt;         Gentoo penguin (Pygoscelis papua) 
#&gt;                                       124
```

---

## `tidyr`


```r
table(penguins_clean$species)
```

```
#&gt; 
#&gt;       Adelie Penguin (Pygoscelis adeliae) 
#&gt;                                       152 
#&gt; Chinstrap penguin (Pygoscelis antarctica) 
#&gt;                                        68 
#&gt;         Gentoo penguin (Pygoscelis papua) 
#&gt;                                       124
```

This variable violates the tidy rule that each cell should include a single value. 

Species hold both the *common name* and the *latin name* of the penguin.

---

## `tidyr`

We can use a `tidyr` function called `separate()` to turn this into two variables.

Two arguments are important for that:

+ `sep`: specifies by which character the value should be split
+ `into`: a vector which specifies the resulting new variable names

---


## `tidyr`

In our case we want to split by opening bracket `\\(` and will name our variables `species` and `latin_name`:


```r
penguins_clean &lt;- separate(penguins_clean, species, sep = " \\(", into = c("species", "latin_name"))
```


```r
penguins_clean
```

```
#&gt; # A tibble: 344 x 16
#&gt;    study_name sample_number species latin_name island individual_id
#&gt;    &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;        
#&gt;  1 PAL0708                1 Adelie… Pygosceli… Torge… N1A1         
#&gt;  2 PAL0708                2 Adelie… Pygosceli… Torge… N1A2         
#&gt;  3 PAL0708                3 Adelie… Pygosceli… Torge… N2A1         
#&gt;  4 PAL0708                4 Adelie… Pygosceli… Torge… N2A2         
#&gt;  5 PAL0708                5 Adelie… Pygosceli… Torge… N3A1         
#&gt;  6 PAL0708                6 Adelie… Pygosceli… Torge… N3A2         
#&gt;  7 PAL0708                7 Adelie… Pygosceli… Torge… N4A1         
#&gt;  8 PAL0708                8 Adelie… Pygosceli… Torge… N4A2         
#&gt;  9 PAL0708                9 Adelie… Pygosceli… Torge… N5A1         
#&gt; 10 PAL0708               10 Adelie… Pygosceli… Torge… N5A2         
#&gt; # … with 334 more rows, and 10 more variables: clutch_completion &lt;chr&gt;,
#&gt; #   date_egg &lt;date&gt;, culmen_length_mm &lt;dbl&gt;, culmen_depth_mm &lt;dbl&gt;,
#&gt; #   flipper_length_mm &lt;dbl&gt;, body_mass_g &lt;dbl&gt;, sex &lt;chr&gt;,
#&gt; #   delta_15_n_o_oo &lt;dbl&gt;, delta_13_c_o_oo &lt;dbl&gt;, comments &lt;chr&gt;
```


---


## `tidyr`

In our case we want to split by an empty space and an opening bracket ` \\(` and we will name our variables `species` and `latin_name`:


```r
penguins_clean &lt;- separate(penguins_clean, species, sep = " \\(", into = c("species", "latin_name"))
```

There is a also a function called `unite()` which works in the opposite direction.

---

## `tidyr`

Now our data is in tidy format!

We were in luck because the data pretty much already came in a format that was: one observation per row.

But what if that is not the case?

---

### `pivot_wider()` and `pivot_longer()`

`tidyr` also comes equipped to deal with data that has more that one observation per row. 

The function to use here is called `pivot_wider`.

Now our `penguin_clean` data is already tidy.

But we can just read in a dataset that isn't:


```r
untidy_animals &lt;- read_csv("https://github.com/favstats/ds3_r_intro/blob/main/data/untidy_animals.csv?raw=true")
```

---

### `pivot_wider()` and `pivot_longer()`




```r
untidy_animals
```

```
#&gt; # A tibble: 10 x 3
#&gt;    Animal             Type     Value
#&gt;    &lt;chr&gt;              &lt;chr&gt;    &lt;dbl&gt;
#&gt;  1 Domestic dog       lifespan 24   
#&gt;  2 Domestic dog       ratio     5.1 
#&gt;  3 Domestic cat       lifespan 30   
#&gt;  4 Domestic cat       ratio     4.08
#&gt;  5 American alligator lifespan 77   
#&gt;  6 American alligator ratio     1.59
#&gt;  7 Golden hamster     lifespan  3.9 
#&gt;  8 Golden hamster     ratio    31.4 
#&gt;  9 King penguin       lifespan 26   
#&gt; 10 King penguin       ratio     4.71
```

---

### `pivot_wider()` and `pivot_longer()`

You may recognize this data from the subsection *Untidy data I*

Now let's use `pivot_wider` to make every row an observation.

We need two main arguments for that:

1. `names_from`: tells the function where the new column names come from
2. `values_from`: tells the function where the values should come from



---

### `pivot_wider()` and `pivot_longer()`


```r
tidy_animals &lt;- pivot_wider(untidy_animals, 
                            names_from = Type, 
                            values_from = Value)

tidy_animals
```

```
#&gt; # A tibble: 5 x 3
#&gt;   Animal             lifespan ratio
#&gt;   &lt;chr&gt;                 &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 Domestic dog           24    5.1 
#&gt; 2 Domestic cat           30    4.08
#&gt; 3 American alligator     77    1.59
#&gt; 4 Golden hamster          3.9 31.4 
#&gt; 5 King penguin           26    4.71
```


---

### `pivot_wider()` and `pivot_longer()`

`pivot_longer` can untidy our data again

The argument `cols = ` tells the function which variables to turn into long format:


```r
pivot_longer(tidy_animals, cols = c(lifespan, ratio))
```

```
#&gt; # A tibble: 10 x 3
#&gt;    Animal             name     value
#&gt;    &lt;chr&gt;              &lt;chr&gt;    &lt;dbl&gt;
#&gt;  1 Domestic dog       lifespan 24   
#&gt;  2 Domestic dog       ratio     5.1 
#&gt;  3 Domestic cat       lifespan 30   
#&gt;  4 Domestic cat       ratio     4.08
#&gt;  5 American alligator lifespan 77   
#&gt;  6 American alligator ratio     1.59
#&gt;  7 Golden hamster     lifespan  3.9 
#&gt;  8 Golden hamster     ratio    31.4 
#&gt;  9 King penguin       lifespan 26   
#&gt; 10 King penguin       ratio     4.71
```


---
class: center, middle, inverse

## Data manipulation using `dplyr`

&lt;center&gt;
&lt;img src="https://github.com/allisonhorst/stats-illustrations/blob/master/rstats-artwork/dplyr_wrangling.png?raw=true" style="width: 62%" /&gt;
&lt;/center&gt;


.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]
---


class: center, middle, inverse

## `select()`

helps you select variables




---

## `select()`

![](https://favstats.shinyapps.io/r_intro/_w_bfa1a45e/images/select.png)

`select()` is part of the dplyr package and helps you select variables

Remember: with tidyverse-style functions, **data is always the first argument**.

---

## `select()`

![](https://favstats.shinyapps.io/r_intro/_w_bfa1a45e/images/select.png)

Here we only keep `individual_id`, `sex` and `species`.


```r
select(penguins_clean, individual_id, sex, species)
```

```
#&gt; # A tibble: 344 x 3
#&gt;    individual_id sex    species       
#&gt;    &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;         
#&gt;  1 N1A1          MALE   Adelie Penguin
#&gt;  2 N1A2          FEMALE Adelie Penguin
#&gt;  3 N2A1          FEMALE Adelie Penguin
#&gt;  4 N2A2          &lt;NA&gt;   Adelie Penguin
#&gt;  5 N3A1          FEMALE Adelie Penguin
#&gt;  6 N3A2          MALE   Adelie Penguin
#&gt;  7 N4A1          FEMALE Adelie Penguin
#&gt;  8 N4A2          MALE   Adelie Penguin
#&gt;  9 N5A1          &lt;NA&gt;   Adelie Penguin
#&gt; 10 N5A2          &lt;NA&gt;   Adelie Penguin
#&gt; # … with 334 more rows
```

---

## `select()`

We can also **remove** variables with a **`-`** (minus).

Here we remove `individual_id`, `sex` and `species`.


```r
names(select(penguins_clean, -individual_id, -sex, -species))
```

```
#&gt;  [1] "study_name"        "sample_number"     "latin_name"       
#&gt;  [4] "island"            "clutch_completion" "date_egg"         
#&gt;  [7] "culmen_length_mm"  "culmen_depth_mm"   "flipper_length_mm"
#&gt; [10] "body_mass_g"       "delta_15_n_o_oo"   "delta_13_c_o_oo"  
#&gt; [13] "comments"
```

`individual_id`, `sex` and `species` are missing!

---

#### Selection helpers

These *selection helpers* match variables according to a given pattern.

`starts_with()`: Starts with a prefix.

`ends_with()`: Ends with a suffix.

`contains()`: Contains a literal string.

`matches()`: Matches a regular expression.

---

#### Selection helpers

For example: let's keep all variables that start with `s`:


```r
select(penguins_clean, starts_with("s"))
```

```
#&gt; # A tibble: 344 x 4
#&gt;    study_name sample_number species        sex   
#&gt;    &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; 
#&gt;  1 PAL0708                1 Adelie Penguin MALE  
#&gt;  2 PAL0708                2 Adelie Penguin FEMALE
#&gt;  3 PAL0708                3 Adelie Penguin FEMALE
#&gt;  4 PAL0708                4 Adelie Penguin &lt;NA&gt;  
#&gt;  5 PAL0708                5 Adelie Penguin FEMALE
#&gt;  6 PAL0708                6 Adelie Penguin MALE  
#&gt;  7 PAL0708                7 Adelie Penguin FEMALE
#&gt;  8 PAL0708                8 Adelie Penguin MALE  
#&gt;  9 PAL0708                9 Adelie Penguin &lt;NA&gt;  
#&gt; 10 PAL0708               10 Adelie Penguin &lt;NA&gt;  
#&gt; # … with 334 more rows
```

---

#### Even more ways to select

Select the first 5 variables:


```r
select(penguins_clean, 1:5)
```

```
#&gt; # A tibble: 344 x 5
#&gt;    study_name sample_number species        latin_name          island   
#&gt;    &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;               &lt;chr&gt;    
#&gt;  1 PAL0708                1 Adelie Penguin Pygoscelis adeliae) Torgersen
#&gt;  2 PAL0708                2 Adelie Penguin Pygoscelis adeliae) Torgersen
#&gt;  3 PAL0708                3 Adelie Penguin Pygoscelis adeliae) Torgersen
#&gt;  4 PAL0708                4 Adelie Penguin Pygoscelis adeliae) Torgersen
#&gt;  5 PAL0708                5 Adelie Penguin Pygoscelis adeliae) Torgersen
#&gt;  6 PAL0708                6 Adelie Penguin Pygoscelis adeliae) Torgersen
#&gt;  7 PAL0708                7 Adelie Penguin Pygoscelis adeliae) Torgersen
#&gt;  8 PAL0708                8 Adelie Penguin Pygoscelis adeliae) Torgersen
#&gt;  9 PAL0708                9 Adelie Penguin Pygoscelis adeliae) Torgersen
#&gt; 10 PAL0708               10 Adelie Penguin Pygoscelis adeliae) Torgersen
#&gt; # … with 334 more rows
```


---

#### Even more ways to select

Select everything from `individual_id` to `flipper_length_mm`.


```r
select(penguins_clean, individual_id:flipper_length_mm)
```

```
#&gt; # A tibble: 344 x 6
#&gt;    individual_id clutch_completi… date_egg   culmen_length_mm culmen_depth_mm
#&gt;    &lt;chr&gt;         &lt;chr&gt;            &lt;date&gt;                &lt;dbl&gt;           &lt;dbl&gt;
#&gt;  1 N1A1          Yes              2007-11-11             39.1            18.7
#&gt;  2 N1A2          Yes              2007-11-11             39.5            17.4
#&gt;  3 N2A1          Yes              2007-11-16             40.3            18  
#&gt;  4 N2A2          Yes              2007-11-16             NA              NA  
#&gt;  5 N3A1          Yes              2007-11-16             36.7            19.3
#&gt;  6 N3A2          Yes              2007-11-16             39.3            20.6
#&gt;  7 N4A1          No               2007-11-15             38.9            17.8
#&gt;  8 N4A2          No               2007-11-15             39.2            19.6
#&gt;  9 N5A1          Yes              2007-11-09             34.1            18.1
#&gt; 10 N5A2          Yes              2007-11-09             42              20.2
#&gt; # … with 334 more rows, and 1 more variable: flipper_length_mm &lt;dbl&gt;
```


---

class: center, middle, inverse

## `filter()`

helps you filter rows


---

## `filter()`

helps you filter rows

![](https://favstats.shinyapps.io/r_intro/_w_bfa1a45e/images/filter.png)

Here we only keep penguins from the Island `Dream`.


```r
filter(penguins_clean, island == "Dream")
```

```
#&gt; # A tibble: 124 x 16
#&gt;    study_name sample_number species latin_name island individual_id
#&gt;    &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;        
#&gt;  1 PAL0708               31 Adelie… Pygosceli… Dream  N21A1        
#&gt;  2 PAL0708               32 Adelie… Pygosceli… Dream  N21A2        
#&gt;  3 PAL0708               33 Adelie… Pygosceli… Dream  N22A1        
#&gt;  4 PAL0708               34 Adelie… Pygosceli… Dream  N22A2        
#&gt;  5 PAL0708               35 Adelie… Pygosceli… Dream  N23A1        
#&gt;  6 PAL0708               36 Adelie… Pygosceli… Dream  N23A2        
#&gt;  7 PAL0708               37 Adelie… Pygosceli… Dream  N24A1        
#&gt;  8 PAL0708               38 Adelie… Pygosceli… Dream  N24A2        
#&gt;  9 PAL0708               39 Adelie… Pygosceli… Dream  N25A1        
#&gt; 10 PAL0708               40 Adelie… Pygosceli… Dream  N25A2        
#&gt; # … with 114 more rows, and 10 more variables: clutch_completion &lt;chr&gt;,
#&gt; #   date_egg &lt;date&gt;, culmen_length_mm &lt;dbl&gt;, culmen_depth_mm &lt;dbl&gt;,
#&gt; #   flipper_length_mm &lt;dbl&gt;, body_mass_g &lt;dbl&gt;, sex &lt;chr&gt;,
#&gt; #   delta_15_n_o_oo &lt;dbl&gt;, delta_13_c_o_oo &lt;dbl&gt;, comments &lt;chr&gt;
```

---

## `filter()`

Here the **`%in%`** operator can come in handy again if we want to filter more than one island:


```r
islands_to_keep &lt;- c("Dream", "Biscoe")

filter(penguins_clean, island %in% islands_to_keep)
```

```
#&gt; # A tibble: 292 x 16
#&gt;    study_name sample_number species latin_name island individual_id
#&gt;    &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;        
#&gt;  1 PAL0708               21 Adelie… Pygosceli… Biscoe N11A1        
#&gt;  2 PAL0708               22 Adelie… Pygosceli… Biscoe N11A2        
#&gt;  3 PAL0708               23 Adelie… Pygosceli… Biscoe N12A1        
#&gt;  4 PAL0708               24 Adelie… Pygosceli… Biscoe N12A2        
#&gt;  5 PAL0708               25 Adelie… Pygosceli… Biscoe N13A1        
#&gt;  6 PAL0708               26 Adelie… Pygosceli… Biscoe N13A2        
#&gt;  7 PAL0708               27 Adelie… Pygosceli… Biscoe N17A1        
#&gt;  8 PAL0708               28 Adelie… Pygosceli… Biscoe N17A2        
#&gt;  9 PAL0708               29 Adelie… Pygosceli… Biscoe N18A1        
#&gt; 10 PAL0708               30 Adelie… Pygosceli… Biscoe N18A2        
#&gt; # … with 282 more rows, and 10 more variables: clutch_completion &lt;chr&gt;,
#&gt; #   date_egg &lt;date&gt;, culmen_length_mm &lt;dbl&gt;, culmen_depth_mm &lt;dbl&gt;,
#&gt; #   flipper_length_mm &lt;dbl&gt;, body_mass_g &lt;dbl&gt;, sex &lt;chr&gt;,
#&gt; #   delta_15_n_o_oo &lt;dbl&gt;, delta_13_c_o_oo &lt;dbl&gt;, comments &lt;chr&gt;
```



---
class: center, middle, inverse

## `mutate()`

helps you create variables


---

## `mutate()`

![](https://favstats.shinyapps.io/r_intro/_w_dfe6b732/images/mutate.png)

`mutate` will take a statement like this:

`variable_name = some_calculation`

and attach `variable_name` at the *end of the dataset*.

---

## `mutate()`

![](https://favstats.shinyapps.io/r_intro/_w_dfe6b732/images/mutate.png)

Let's say we want to calculate penguin bodymass in kg rather than gram.


```r
pg_new &lt;- mutate(penguins_clean, bodymass_kg = body_mass_g/1000)
```


```r
select(pg_new, bodymass_kg, body_mass_g)
```

```
#&gt; # A tibble: 344 x 2
#&gt;    bodymass_kg body_mass_g
#&gt;          &lt;dbl&gt;       &lt;dbl&gt;
#&gt;  1        3.75        3750
#&gt;  2        3.8         3800
#&gt;  3        3.25        3250
#&gt;  4       NA             NA
#&gt;  5        3.45        3450
#&gt;  6        3.65        3650
#&gt;  7        3.62        3625
#&gt;  8        4.68        4675
#&gt;  9        3.48        3475
#&gt; 10        4.25        4250
#&gt; # … with 334 more rows
```

---

#### Recoding with `ifelse`

`ifelse()` is a very useful function that allows to easily recode variables based on logical tests.

It's basic functionality looks like this:

`$$\color{red}{\text{ifelse}}(\color{orange}{\text{logical test}},\color{blue}{\text{value if TRUE}}, \color{green}{\text{value if FALSE}})$$`

Here is a very basic example:


```r
ifelse(1 == 1, "Pick me if test is TRUE", "Pick me if test is FALSE")
```

```
#&gt; [1] "Pick me if test is TRUE"
```



```r
ifelse(1 != 1, "Pick me if test is TRUE", "Pick me if test is FALSE")
```

```
#&gt; [1] "Pick me if test is FALSE"
```

---

#### Recoding with `ifelse`

Let's use `ifelse` in combination with `mutate`.

Let's create the variable `sex_short` which has a shorter label for sex:


```r
pg_new &lt;- mutate(penguins_clean, sex_short = ifelse(sex == "MALE", "m", "f"))

select(pg_new, sex, sex_short)
```

```
#&gt; # A tibble: 344 x 2
#&gt;    sex    sex_short
#&gt;    &lt;chr&gt;  &lt;chr&gt;    
#&gt;  1 MALE   m        
#&gt;  2 FEMALE f        
#&gt;  3 FEMALE f        
#&gt;  4 &lt;NA&gt;   &lt;NA&gt;     
#&gt;  5 FEMALE f        
#&gt;  6 MALE   m        
#&gt;  7 FEMALE f        
#&gt;  8 MALE   m        
#&gt;  9 &lt;NA&gt;   &lt;NA&gt;     
#&gt; 10 &lt;NA&gt;   &lt;NA&gt;     
#&gt; # … with 334 more rows
```

---

#### Recoding with `case_when`

`case_when` (from the `dplyr` package) is like `ifelse` but allows for much more complex combinations.

The basic setup for a `case_when` call look like this:


case_when(


&amp;nbsp;&amp;nbsp;&amp;nbsp; `\(\color{orange}{\text{logical test}}\)` ~ `\(\color{blue}{\text{what should happen if TRUE}}\)`,

&amp;nbsp;&amp;nbsp;&amp;nbsp; `\(\color{orange}{\text{logical test}}\)` ~ `\(\color{blue}{\text{what should happen if TRUE}}\)`,


&amp;nbsp;&amp;nbsp;&amp;nbsp; `\(\color{orange}{\text{logical test}}\)` ~ `\(\color{blue}{\text{what should happen if TRUE}}\)`,

&amp;nbsp;&amp;nbsp;&amp;nbsp; `\(TRUE\)` ~ `\(\color{green}{\text{what should happen with everything else}}\)`,

)


---

#### Recoding with `case_when`

The following code recodes a numeric vector (1 through 50) into three categorical ones:



```r
x &lt;- 1:50

case_when(
  x %in% 1:10 ~ "1 through 10",
  x %in% 11:30 ~ "11 through 30",
  TRUE ~ "above 30"
)
```

```
#&gt;  [1] "1 through 10"  "1 through 10"  "1 through 10"  "1 through 10" 
#&gt;  [5] "1 through 10"  "1 through 10"  "1 through 10"  "1 through 10" 
#&gt;  [9] "1 through 10"  "1 through 10"  "11 through 30" "11 through 30"
#&gt; [13] "11 through 30" "11 through 30" "11 through 30" "11 through 30"
#&gt; [17] "11 through 30" "11 through 30" "11 through 30" "11 through 30"
#&gt; [21] "11 through 30" "11 through 30" "11 through 30" "11 through 30"
#&gt; [25] "11 through 30" "11 through 30" "11 through 30" "11 through 30"
#&gt; [29] "11 through 30" "11 through 30" "above 30"      "above 30"     
#&gt; [33] "above 30"      "above 30"      "above 30"      "above 30"     
#&gt; [37] "above 30"      "above 30"      "above 30"      "above 30"     
#&gt; [41] "above 30"      "above 30"      "above 30"      "above 30"     
#&gt; [45] "above 30"      "above 30"      "above 30"      "above 30"     
#&gt; [49] "above 30"      "above 30"
```


---

#### Recoding with `case_when`

Let's use `case_when` in combination with `mutate`.

Creating the variable `short_island` which has a shorter label for `island`:


```r
pg_new &lt;- mutate(penguins_clean, 
        island_short = case_when(
          island == "Torgersen" ~ "T",
          island == "Biscoe" ~ "B",
          island == "Dream" ~ "D"
        ))
```


```r
select(pg_new, island, island_short)
```

```
#&gt; # A tibble: 344 x 2
#&gt;    island    island_short
#&gt;    &lt;chr&gt;     &lt;chr&gt;       
#&gt;  1 Torgersen T           
#&gt;  2 Torgersen T           
#&gt;  3 Torgersen T           
#&gt;  4 Torgersen T           
#&gt;  5 Torgersen T           
#&gt;  6 Torgersen T           
#&gt;  7 Torgersen T           
#&gt;  8 Torgersen T           
#&gt;  9 Torgersen T           
#&gt; 10 Torgersen T           
#&gt; # … with 334 more rows
```


---

class: center, middle, inverse

## `rename()`

helps you rename variables


---

## `rename()`

Just changes the variable name but leaves all else intact:


```r
rename(penguins_clean, sample = sample_number)
```

```
#&gt; # A tibble: 344 x 16
#&gt;    study_name sample species latin_name island individual_id clutch_completi…
#&gt;    &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;         &lt;chr&gt;           
#&gt;  1 PAL0708         1 Adelie… Pygosceli… Torge… N1A1          Yes             
#&gt;  2 PAL0708         2 Adelie… Pygosceli… Torge… N1A2          Yes             
#&gt;  3 PAL0708         3 Adelie… Pygosceli… Torge… N2A1          Yes             
#&gt;  4 PAL0708         4 Adelie… Pygosceli… Torge… N2A2          Yes             
#&gt;  5 PAL0708         5 Adelie… Pygosceli… Torge… N3A1          Yes             
#&gt;  6 PAL0708         6 Adelie… Pygosceli… Torge… N3A2          Yes             
#&gt;  7 PAL0708         7 Adelie… Pygosceli… Torge… N4A1          No              
#&gt;  8 PAL0708         8 Adelie… Pygosceli… Torge… N4A2          No              
#&gt;  9 PAL0708         9 Adelie… Pygosceli… Torge… N5A1          Yes             
#&gt; 10 PAL0708        10 Adelie… Pygosceli… Torge… N5A2          Yes             
#&gt; # … with 334 more rows, and 9 more variables: date_egg &lt;date&gt;,
#&gt; #   culmen_length_mm &lt;dbl&gt;, culmen_depth_mm &lt;dbl&gt;, flipper_length_mm &lt;dbl&gt;,
#&gt; #   body_mass_g &lt;dbl&gt;, sex &lt;chr&gt;, delta_15_n_o_oo &lt;dbl&gt;, delta_13_c_o_oo &lt;dbl&gt;,
#&gt; #   comments &lt;chr&gt;
```


---


class: center, middle, inverse

## `arrange()`

orders your dataset


---

## `arrange()`

You can order your data to show the highest or lowest value first.

Lowest first:


```r
arrange(penguins_clean, sample_number)
```

Highest first:


```r
arrange(penguins_clean, desc(sample_number))
```

---

class: center, middle, inverse

## `group_by()` and `summarize()`

when you want to aggregate your data (by groups)


---


## `group_by()` and `summarize()`

Sometimes we want to calculate group statistics.

In other languages this is often a pain. With `dplyr` this is fairly easy **and** readable.

&lt;img src="https://learn.r-journalism.com/wrangling/dplyr/images/groupby.png" style="width: 80%" /&gt;



---

## `group_by()` and `summarize()`


First we group `penguins_clean` by `sex`.


```r
grouped_by_sex &lt;- group_by(penguins_clean, sex)
```

`summarize` works in a similar way to `mutate`:

`variable_name = some_calculation`


```r
summarise(grouped_by_sex, avg_culmen_length_mm = mean(culmen_length_mm, na.rm = T))
```

```
#&gt; # A tibble: 3 x 2
#&gt;   sex    avg_culmen_length_mm
#&gt;   &lt;chr&gt;                 &lt;dbl&gt;
#&gt; 1 FEMALE                 42.1
#&gt; 2 MALE                   45.9
#&gt; 3 &lt;NA&gt;                   41.3
```

--- 
class: center, middle, inverse

## `count()`

When you want to count how often a certain value within variables(s) occurs

---

## `count()`

Now this is a function that I use all the time. Simply specify which variable you want to count:



```r
count(penguins_clean, species, sort = T)
```

```
#&gt; # A tibble: 3 x 2
#&gt;   species               n
#&gt;   &lt;chr&gt;             &lt;int&gt;
#&gt; 1 Adelie Penguin      152
#&gt; 2 Gentoo penguin      124
#&gt; 3 Chinstrap penguin    68
```


---


class: center, middle, inverse

# **`%&gt;%`**

## The pipe operator

&lt;center&gt;
&lt;img src="https://rpodcast.github.io/officer-advrmarkdown/img/magrittr.png" style="width: 62%" /&gt;
&lt;/center&gt;


---

## The `%&gt;%` operator

The point of the pipe is to help you write code in a way that is easier to read and understand. 

Let's consider an example with the data manipulation we have done so far:


```r
## first I select variables
pg &lt;- select(penguins_clean, individual_id, island, body_mass_g)

## then I filter to only Dream island
pg &lt;- filter(pg, island == "Dream")

## then I convert body_mass_g to kg
pg &lt;- mutate(pg, bodymass_kg = body_mass_g/1000)

## rename individual id to simply id
pg &lt;- rename(pg, id = individual_id)
```

---


## The `%&gt;%` operator

Now this works but the problem is: we have to write a lot of code that repeats itself!


```r
pg
```

```
#&gt; # A tibble: 124 x 4
#&gt;    id    island body_mass_g bodymass_kg
#&gt;    &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;       &lt;dbl&gt;
#&gt;  1 N21A1 Dream         3250        3.25
#&gt;  2 N21A2 Dream         3900        3.9 
#&gt;  3 N22A1 Dream         3300        3.3 
#&gt;  4 N22A2 Dream         3900        3.9 
#&gt;  5 N23A1 Dream         3325        3.32
#&gt;  6 N23A2 Dream         4150        4.15
#&gt;  7 N24A1 Dream         3950        3.95
#&gt;  8 N24A2 Dream         3550        3.55
#&gt;  9 N25A1 Dream         3300        3.3 
#&gt; 10 N25A2 Dream         4650        4.65
#&gt; # … with 114 more rows
```

---

## The `%&gt;%` operator

Another alternative is to *nest all the functions*:


```r
rename(mutate(filter(select(penguins_clean, individual_id, island, body_mass_g), island == "Dream"), bodymass_kg = body_mass_g/1000), id = individual_id)
```

```
#&gt; # A tibble: 124 x 4
#&gt;    id    island body_mass_g bodymass_kg
#&gt;    &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;       &lt;dbl&gt;
#&gt;  1 N21A1 Dream         3250        3.25
#&gt;  2 N21A2 Dream         3900        3.9 
#&gt;  3 N22A1 Dream         3300        3.3 
#&gt;  4 N22A2 Dream         3900        3.9 
#&gt;  5 N23A1 Dream         3325        3.32
#&gt;  6 N23A2 Dream         4150        4.15
#&gt;  7 N24A1 Dream         3950        3.95
#&gt;  8 N24A2 Dream         3550        3.55
#&gt;  9 N25A1 Dream         3300        3.3 
#&gt; 10 N25A2 Dream         4650        4.65
#&gt; # … with 114 more rows
```


---

## The `%&gt;%` operator

*The piping style*: 

Read from top to bottom and from left to right and the `%&gt;%` as "and then".


```r
penguins_clean %&gt;% 
  select(individual_id, island, body_mass_g) %&gt;% 
  filter(island == "Dream") %&gt;% 
  mutate(bodymass_kg = body_mass_g/1000) %&gt;% 
  rename(id = individual_id)
```

```
#&gt; # A tibble: 124 x 4
#&gt;    id    island body_mass_g bodymass_kg
#&gt;    &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;       &lt;dbl&gt;
#&gt;  1 N21A1 Dream         3250        3.25
#&gt;  2 N21A2 Dream         3900        3.9 
#&gt;  3 N22A1 Dream         3300        3.3 
#&gt;  4 N22A2 Dream         3900        3.9 
#&gt;  5 N23A1 Dream         3325        3.32
#&gt;  6 N23A2 Dream         4150        4.15
#&gt;  7 N24A1 Dream         3950        3.95
#&gt;  8 N24A2 Dream         3550        3.55
#&gt;  9 N25A1 Dream         3300        3.3 
#&gt; 10 N25A2 Dream         4650        4.65
#&gt; # … with 114 more rows
```

---

## Small Note on the Pipe

Since R Version 4.1.0 Base R also provides a pipe.

It looks like this: `\(|&gt;\)`

While it shares many similarities with the `%&gt;%` there are also some differences.

It's beyond the scope of this workshop to go over it here but for the sake of simplicity we will stick with the `magrittr` pipe.

---

class: center, middle, inverse

# Exercises

### It's time to type some R code




&lt;center&gt;
&lt;img src="https://media1.tenor.com/images/72bf7922ac0b07b2f7f8f630e4ae01d2/tenor.gif?itemid=11364811" style="width: 50%" /&gt;
&lt;/center&gt;

Google Colab: [tinyurl.com/ds3rintro2](https://tinyurl.com/ds3rintro2)

---
class: center, middle, inverse

# Some Final Things

## If only we had more time..

---

## RStudio Tour

&lt;center&gt;
&lt;img src="https://bookdown.org/ageraci/STAT160Companion/images/rstudiopanes.png" style="width: 82%" /&gt;
&lt;/center&gt;

---

## RStudio Tour

* Program pane
  * Shows R Files, typically .R or .Rmd
  
* Environment pane
  * All the objects that you created during your session
  
* Console pane
  * For executing short snippets of R code
  
* Files pane
  * Gives access to files, but  also help, and plots
  
---

## Using RStudio Projects


[RStudio projects](https://r4ds.had.co.nz/workflow-projects.html) make it straightforward to divide your work into multiple contexts, each with their own working directory, workspace, history, and source documents.

![](http://www.rstudio.com/images/docs/projects_new.png)

---


## Rmarkdown

&lt;center&gt;
&lt;img src="https://github.com/allisonhorst/stats-illustrations/blob/master/rstats-artwork/rmarkdown_wizards.png?raw=true" style="width: 72%" /&gt;
&lt;/center&gt;

.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]

---


## Rmarkdown

.leftcol[
&lt;center&gt;
&lt;img src="https://github.com/allisonhorst/stats-illustrations/blob/master/rstats-artwork/rmarkdown_wizards.png?raw=true" style="width: 100%" /&gt;
&lt;/center&gt;

.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]
]

.rightcol[
* create *documents* with R
  
* mix code, text and graphs as you like

* write your thesis, create slides, automated reports, dashboards and interactive web apps all from within [Rmarkdown](https://rmarkdown.rstudio.com/docs/articles/rmarkdown.html)
  
]



---


## Rmarkdown

.leftcol[
&lt;center&gt;
&lt;img src="https://github.com/allisonhorst/stats-illustrations/blob/master/rstats-artwork/rmarkdown_wizards.png?raw=true" style="width: 100%" /&gt;
&lt;/center&gt;

.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]
]

.rightcol[
* create *documents* with R
  
* mix code, text and graphs as you like

* write your thesis, create slides, automated reports, dashboards and interactive web apps all from within Rmarkdown
  
]





---

## Further Resources to learn R


* [Book: R for Data Science](https://r4ds.had.co.nz/)

* [Danielle Navarro's YouTube channel](https://www.youtube.com/channel/UCfNGzUFfsy_3udMY8UyaqBA)

* [Start coding using RStudio.cloud Primers](https://rstudio.cloud/learn/primers)

* [RStudio Cheat Sheets](https://www.rstudio.com/resources/cheatsheets/)

* [Book: A ModernDive into R and the Tidyverse](https://moderndive.com/)

* [TidyTuesday - Community](https://www.tidytuesday.com/)



---
class: center, middle, inverse

## Q&amp;A

--

&lt;center&gt;
&lt;img src="https://i.gifer.com/24OD.gif" style="width: 22%" /&gt;
&lt;/center&gt;



---


class: center, middle, inverse

### Thank you for participating!

I hope you had fun!

&lt;center&gt;
&lt;img src="https://media1.tenor.com/images/da0f7d5d93faa11dfc36db1e6c6fdf2a/tenor.gif?itemid=6159389" style="width: 32%" /&gt;
&lt;/center&gt;

Link to Slides: [tinyurl.com/ds3rintro](https://favstats.github.io/ds3_r_intro)

Google Colab Part I: [tinyurl.com/ds3rintro1](https://tinyurl.com/ds3rintro1)

Google Colab Part II: [tinyurl.com/ds3rintro2](https://tinyurl.com/ds3rintro2)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"slideNumberFormat": "%current%<br>",
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<script>
  (function() {
    var divHTML = document.querySelectorAll(".details-open");
    divHTML.forEach(function (el) {
      var preNodes = el.getElementsByTagName("pre");
      var outputNode = preNodes[1];
      outputNode.outerHTML = "<details open class='output'><summary>Run</summary>" + outputNode.outerHTML + "</details>";
    })
  })();
(function() {
  var divHTML = document.querySelectorAll(".details");
  divHTML.forEach(function (el) {
    var preNodes = el.getElementsByTagName("pre");
    var outputNode = preNodes[1];
    outputNode.outerHTML = "<details class='output'><summary>Run</summary>" + outputNode.outerHTML + "</details>";
  })
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
